{"numFailedTestSuites":0,"numFailedTests":0,"numPassedTestSuites":11,"numPassedTests":194,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":11,"numTotalTests":194,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1761678239137,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["catalogService","listSetores"],"duration":88,"failureDetails":[],"failureMessages":[],"fullName":"catalogService listSetores retorna sigla e nome de setores em ordem","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"retorna sigla e nome de setores em ordem"},{"ancestorTitles":["catalogService","listAssuntos"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"catalogService listAssuntos retorna id e nome de assuntos em ordem","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"retorna id e nome de assuntos em ordem"},{"ancestorTitles":["catalogService","listTiposProcesso"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"catalogService listTiposProcesso retorna id e nome de tipos de processo em ordem","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"retorna id e nome de tipos de processo em ordem"}],"endTime":1761678248578,"message":"","name":"C:\\Users\\lcmuniz\\Documents\\spe-projects\\spe-api\\services\\__tests__\\catalogService.test.js","startTime":1761678241877,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["partesCadastroService","listarPartesCadastro"],"duration":59,"failureDetails":[],"failureMessages":[],"fullName":"partesCadastroService listarPartesCadastro lista com filtro q, limit e offset","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"lista com filtro q, limit e offset"},{"ancestorTitles":["partesCadastroService","listarPartesCadastro"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"partesCadastroService listarPartesCadastro lista sem filtro q (defaults limit=50, offset=0)","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"lista sem filtro q (defaults limit=50, offset=0)"},{"ancestorTitles":["partesCadastroService","obterParteCadastro"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"partesCadastroService obterParteCadastro retorna registro por id","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"retorna registro por id"},{"ancestorTitles":["partesCadastroService","criarParteCadastro"],"duration":33,"failureDetails":[],"failureMessages":[],"fullName":"partesCadastroService criarParteCadastro insere com id gerado e normaliza UF","invocations":1,"location":null,"numPassingAsserts":17,"retryReasons":[],"status":"passed","title":"insere com id gerado e normaliza UF"},{"ancestorTitles":["partesCadastroService","atualizarParteCadastro"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"partesCadastroService atualizarParteCadastro atualiza com ordem fixa e normaliza UF","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"atualiza com ordem fixa e normaliza UF"},{"ancestorTitles":["partesCadastroService","removerParteCadastro"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"partesCadastroService removerParteCadastro bloqueia exclusão quando há vínculo em processo_partes pelo cadastro_parte_id","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"bloqueia exclusão quando há vínculo em processo_partes pelo cadastro_parte_id"},{"ancestorTitles":["partesCadastroService","removerParteCadastro"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"partesCadastroService removerParteCadastro exclui quando não há vínculo e retorna ok","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"exclui quando não há vínculo e retorna ok"},{"ancestorTitles":["partesCadastroService","removerParteCadastro"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"partesCadastroService removerParteCadastro exclui quando SELECT retorna objeto sem rows (links.rows indefinido)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"exclui quando SELECT retorna objeto sem rows (links.rows indefinido)"}],"endTime":1761678248725,"message":"","name":"C:\\Users\\lcmuniz\\Documents\\spe-projects\\spe-api\\services\\__tests__\\partesCadastroService.test.js","startTime":1761678241840,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["usuariosService","getUsuarios"],"duration":75,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService getUsuarios retorna usuário por login quando encontrado","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"retorna usuário por login quando encontrado"},{"ancestorTitles":["usuariosService","getUsuarios"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService getUsuarios retorna null por login quando não encontrado","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna null por login quando não encontrado"},{"ancestorTitles":["usuariosService","getUsuarios"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService getUsuarios lista usuários filtrando por setor quando informado","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"lista usuários filtrando por setor quando informado"},{"ancestorTitles":["usuariosService","getUsuarios"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService getUsuarios lista usuários filtrando por sigla de setor quando informado","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"lista usuários filtrando por sigla de setor quando informado"},{"ancestorTitles":["usuariosService","getUsuarios"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService getUsuarios retorna lista vazia quando sigla vazia ou indefinida","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"retorna lista vazia quando sigla vazia ou indefinida"},{"ancestorTitles":["usuariosService","getUsuarios"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService getUsuarios lista usuários sem filtro quando setor não informado","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"lista usuários sem filtro quando setor não informado"},{"ancestorTitles":["usuariosService","getUsuarios"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService getUsuarios ignora login vazio e lista usuários sem filtro","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"ignora login vazio e lista usuários sem filtro"},{"ancestorTitles":["usuariosService","getUsuarios"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService getUsuarios ignora login vazio e aplica filtro por setor quando presente","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"ignora login vazio e aplica filtro por setor quando presente"},{"ancestorTitles":["usuariosService","upsertUsuario"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService upsertUsuario valida login e nome obrigatórios (400)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"valida login e nome obrigatórios (400)"},{"ancestorTitles":["usuariosService","upsertUsuario"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService upsertUsuario faz update quando usuário já existe e retorna usuario.upsert","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"faz update quando usuário já existe e retorna usuario.upsert"},{"ancestorTitles":["usuariosService","upsertUsuario"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService upsertUsuario faz insert quando usuário não existe e retorna usuario.criar","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"faz insert quando usuário não existe e retorna usuario.criar"},{"ancestorTitles":["usuariosService coverage add-ons","upsertUsuario updates"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService coverage add-ons upsertUsuario updates atualiza nome, setor e cargo quando ambos informados","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"atualiza nome, setor e cargo quando ambos informados"},{"ancestorTitles":["usuariosService coverage add-ons","upsertUsuario updates"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService coverage add-ons upsertUsuario updates atualiza nome e setor quando cargo omitido","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"atualiza nome e setor quando cargo omitido"},{"ancestorTitles":["usuariosService coverage add-ons","upsertUsuario updates"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService coverage add-ons upsertUsuario updates atualiza nome e cargo quando setor omitido","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"atualiza nome e cargo quando setor omitido"},{"ancestorTitles":["usuariosService coverage add-ons","upsertUsuario insert defaults"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService coverage add-ons upsertUsuario insert defaults insere com setor PROTOCOLO e cargo null quando omitidos","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"insere com setor PROTOCOLO e cargo null quando omitidos"},{"ancestorTitles":["usuariosService coverage add-ons","getUsuariosPorSigla lower-case input"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"usuariosService coverage add-ons getUsuariosPorSigla lower-case input aplica UPPER na sigla recebida","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"aplica UPPER na sigla recebida"}],"endTime":1761678248834,"message":"","name":"C:\\Users\\lcmuniz\\Documents\\spe-projects\\spe-api\\services\\__tests__\\usuariosService.test.js","startTime":1761678241934,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["acessosService","listAcessos"],"duration":81,"failureDetails":[],"failureMessages":[],"fullName":"acessosService listAcessos retorna linhas do banco para o processo informado","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"retorna linhas do banco para o processo informado"},{"ancestorTitles":["acessosService","addAcesso"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso valida tipo inválido e lança erro 400","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"valida tipo inválido e lança erro 400"},{"ancestorTitles":["acessosService","addAcesso"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso tipo vazio ou undefined lança erro 400 com mensagem específica","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"tipo vazio ou undefined lança erro 400 com mensagem específica"},{"ancestorTitles":["acessosService","addAcesso"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso SETOR sem valor lança erro 400","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"SETOR sem valor lança erro 400"},{"ancestorTitles":["acessosService","addAcesso"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso USUARIO sem valor lança erro 400","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"USUARIO sem valor lança erro 400"},{"ancestorTitles":["acessosService","addAcesso"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso retorna id ao adicionar acesso USUARIO com processo existente","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"retorna id ao adicionar acesso USUARIO com processo existente"},{"ancestorTitles":["acessosService","addAcesso"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso lança 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando processo não existe"},{"ancestorTitles":["acessosService","addAcesso - PARTE"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso - PARTE lança 400 quando parteId ausente","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 400 quando parteId ausente"},{"ancestorTitles":["acessosService","addAcesso - PARTE"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso - PARTE lança 404 quando processo não existe no banco","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando processo não existe no banco"},{"ancestorTitles":["acessosService","addAcesso - PARTE"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso - PARTE lança 400 quando parte não está no processo","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 400 quando parte não está no processo"},{"ancestorTitles":["acessosService","addAcesso - PARTE"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso - PARTE adiciona acesso de PARTE quando parte existe","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"adiciona acesso de PARTE quando parte existe"},{"ancestorTitles":["acessosService","addAcesso - SETOR"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso - SETOR insere com sucesso quando processo existe","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"insere com sucesso quando processo existe"},{"ancestorTitles":["acessosService","addAcesso - case insensitive"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"acessosService addAcesso - case insensitive normaliza tipo para maiúsculas","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"normaliza tipo para maiúsculas"},{"ancestorTitles":["acessosService","removeAcesso"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"acessosService removeAcesso deleta e retorna ok: true quando encontrado","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"deleta e retorna ok: true quando encontrado"},{"ancestorTitles":["acessosService","removeAcesso"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"acessosService removeAcesso lança 404 quando não encontra o acesso","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando não encontra o acesso"}],"endTime":1761678248865,"message":"","name":"C:\\Users\\lcmuniz\\Documents\\spe-projects\\spe-api\\services\\__tests__\\acessosService.test.js","startTime":1761678241767,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["arquivar"],"duration":53,"failureDetails":[],"failureMessages":[],"fullName":"arquivar valida usuário obrigatório","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"valida usuário obrigatório"},{"ancestorTitles":["arquivar"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"arquivar retorna 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando processo não existe"},{"ancestorTitles":["arquivar"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"arquivar retorna 400 quando processo está pendente","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 400 quando processo está pendente"},{"ancestorTitles":["arquivar"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"arquivar retorna 400 quando processo já está arquivado","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 400 quando processo já está arquivado"},{"ancestorTitles":["arquivar"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"arquivar retorna 403 quando não atribuído ao usuário","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando não atribuído ao usuário"},{"ancestorTitles":["arquivar"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"arquivar arquiva com sucesso","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"arquiva com sucesso"}],"endTime":1761678248911,"message":"","name":"C:\\Users\\lcmuniz\\Documents\\spe-projects\\spe-api\\services\\__tests__\\arquivar.test.js","startTime":1761678241791,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["chavesService","listChaves"],"duration":109,"failureDetails":[],"failureMessages":[],"fullName":"chavesService listChaves retorna linhas do banco para o processo informado","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"retorna linhas do banco para o processo informado"},{"ancestorTitles":["chavesService","createChave"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"chavesService createChave valida parteId ausente e lança erro 400","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"valida parteId ausente e lança erro 400"},{"ancestorTitles":["chavesService","createChave"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"chavesService createChave lança 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando processo não existe"},{"ancestorTitles":["chavesService","createChave"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"chavesService createChave lança 404 quando parte não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando parte não existe"},{"ancestorTitles":["chavesService","createChave"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"chavesService createChave cria chave e retorna id e chave","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"cria chave e retorna id e chave"},{"ancestorTitles":["chavesService","revokeChave"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"chavesService revokeChave revoga chave quando encontrada","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"revoga chave quando encontrada"},{"ancestorTitles":["chavesService","revokeChave"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"chavesService revokeChave lança 404 quando não encontra a chave","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando não encontra a chave"}],"endTime":1761678248965,"message":"","name":"C:\\Users\\lcmuniz\\Documents\\spe-projects\\spe-api\\services\\__tests__\\chavesService.test.js","startTime":1761678242267,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["auditoriaService"],"duration":52,"failureDetails":[],"failureMessages":[],"fullName":"auditoriaService insere registro com detalhes objeto removendo cargo vazio","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"insere registro com detalhes objeto removendo cargo vazio"},{"ancestorTitles":["auditoriaService"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"auditoriaService insere com detalhes string, ip de connection e url fallback","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"insere com detalhes string, ip de connection e url fallback"},{"ancestorTitles":["auditoriaService"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"auditoriaService não lança quando query falha e registra erro","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"não lança quando query falha e registra erro"}],"endTime":1761678248992,"message":"","name":"C:\\Users\\lcmuniz\\Documents\\spe-projects\\spe-api\\services\\__tests__\\auditoriaService.test.js","startTime":1761678242358,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["processosService","getProcessoById"],"duration":66,"failureDetails":[],"failureMessages":[],"fullName":"processosService getProcessoById retorna null quando processo não encontrado","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"retorna null quando processo não encontrado"},{"ancestorTitles":["processosService","getProcessoById"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService getProcessoById retorna processo com partes","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"retorna processo com partes"},{"ancestorTitles":["processosService","createProcesso"],"duration":182,"failureDetails":[],"failureMessages":[],"fullName":"processosService createProcesso exige assunto obrigatório","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"exige assunto obrigatório"},{"ancestorTitles":["processosService","createProcesso"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService createProcesso exige base legal quando nivelAcesso não é Público","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"exige base legal quando nivelAcesso não é Público"},{"ancestorTitles":["processosService","createProcesso"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"processosService createProcesso cria processo com defaults, insere partes e documentos, e retorna view","invocations":1,"location":null,"numPassingAsserts":33,"retryReasons":[],"status":"passed","title":"cria processo com defaults, insere partes e documentos, e retorna view"},{"ancestorTitles":["processosService","createProcesso"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService createProcesso retorna 404 quando partes inclui parteId inexistente","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"retorna 404 quando partes inclui parteId inexistente"},{"ancestorTitles":["processosService","createProcesso"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService createProcesso vincula parte existente via parteId sem criar cadastro","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"vincula parte existente via parteId sem criar cadastro"},{"ancestorTitles":["processosService","updateDados"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"processosService updateDados retorna 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando processo não existe"},{"ancestorTitles":["processosService","updateDados"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService updateDados valida base legal quando nivelAcesso diferente de Público","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"valida base legal quando nivelAcesso diferente de Público"},{"ancestorTitles":["processosService","updateDados"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"processosService updateDados atualiza dados e retorna o processo atualizado","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"atualiza dados e retorna o processo atualizado"},{"ancestorTitles":["processosService","atribuir"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"processosService atribuir valida usuário e executor obrigatórios","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"valida usuário e executor obrigatórios"},{"ancestorTitles":["processosService","atribuir"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService atribuir retorna 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando processo não existe"},{"ancestorTitles":["processosService","atribuir"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService atribuir retorna 403 quando processo não está atribuído ao executor","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando processo não está atribuído ao executor"},{"ancestorTitles":["processosService","atribuir"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService atribuir retorna 400 quando usuário destino não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 400 quando usuário destino não existe"},{"ancestorTitles":["processosService","atribuir"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService atribuir retorna 400 quando setor do usuário destino difere do setor atual","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 400 quando setor do usuário destino difere do setor atual"},{"ancestorTitles":["processosService","atribuir"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService atribuir atribui com sucesso e retorna processo e detalhes","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"atribui com sucesso e retorna processo e detalhes"},{"ancestorTitles":["processosService","atribuir"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService atribuir retorna 403 quando processo restrito e destino não possui acesso","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando processo restrito e destino não possui acesso"},{"ancestorTitles":["processosService","atribuir"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService atribuir retorna 404 quando UPDATE não afeta nenhuma linha","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando UPDATE não afeta nenhuma linha"},{"ancestorTitles":["processosService","consultarPublico"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService consultarPublico retorna 404 quando processo não encontrado pelo número","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"retorna 404 quando processo não encontrado pelo número"},{"ancestorTitles":["processosService","consultarPublico"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService consultarPublico retorna 403 quando restrito sem chave","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando restrito sem chave"},{"ancestorTitles":["processosService","consultarPublico"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService consultarPublico retorna dados públicos quando processo é público (por número)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna dados públicos quando processo é público (por número)"},{"ancestorTitles":["processosService","consultarPublico"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService consultarPublico busca por UUID quando valor é UUID","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"busca por UUID quando valor é UUID"},{"ancestorTitles":["processosService","tramitar"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService tramitar valida usuário executor obrigatório","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"valida usuário executor obrigatório"},{"ancestorTitles":["processosService","tramitar"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService tramitar retorna 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando processo não existe"},{"ancestorTitles":["processosService","tramitar"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService tramitar retorna 403 quando processo não está atribuído ao executor","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando processo não está atribuído ao executor"},{"ancestorTitles":["processosService","tramitar"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService tramitar tramita com sucesso e retorna processo e detalhes","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"tramita com sucesso e retorna processo e detalhes"},{"ancestorTitles":["processosService","tramitar"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService tramitar tramita alterando somente prazo e mantém prioridade original","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"tramita alterando somente prazo e mantém prioridade original"},{"ancestorTitles":["processosService","tramitar"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"processosService tramitar tramita sem motivo e prazo, com prioridade definida","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"tramita sem motivo e prazo, com prioridade definida"},{"ancestorTitles":["processosService","listProcessos"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService listProcessos retorna total, page e items com paginação, sem filtros","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"retorna total, page e items com paginação, sem filtros"},{"ancestorTitles":["processosService","listProcessos"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService listProcessos aplica filtros de numero, assunto e interessado","invocations":1,"location":null,"numPassingAsserts":14,"retryReasons":[],"status":"passed","title":"aplica filtros de numero, assunto e interessado"},{"ancestorTitles":["processosService","listProcessos"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"processosService listProcessos aplica filtros de status, prioridade, nivelAcesso e setor","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"aplica filtros de status, prioridade, nivelAcesso e setor"},{"ancestorTitles":["processosService","listProcessos"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"processosService listProcessos aplica pendente, pendenteSetor e somenteMeus com usuario","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"aplica pendente, pendenteSetor e somenteMeus com usuario"},{"ancestorTitles":["processosService","addParte"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService addParte valida nome obrigatório","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"valida nome obrigatório"},{"ancestorTitles":["processosService","addParte"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService addParte retorna 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"retorna 404 quando processo não existe"},{"ancestorTitles":["processosService","addParte"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService addParte cria parte e retorna dados","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"cria parte e retorna dados"},{"ancestorTitles":["processosService","addParte"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService addParte retorna 404 quando parteId inexiste no cadastro","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando parteId inexiste no cadastro"},{"ancestorTitles":["processosService","addParte"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService addParte retorna 404 quando processo não existe via parteId","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando processo não existe via parteId"},{"ancestorTitles":["processosService","addParte"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService addParte vincula cadastro existente via parteId sem inserir novo cadastro","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"vincula cadastro existente via parteId sem inserir novo cadastro"},{"ancestorTitles":["processosService","addParte","deleteParte"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService addParte deleteParte retorna 404 quando parte não encontrada no processo","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"retorna 404 quando parte não encontrada no processo"},{"ancestorTitles":["processosService","addParte","deleteParte"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService addParte deleteParte deleta parte e retorna nome","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"deleta parte e retorna nome"},{"ancestorTitles":["processosService","consultarPublico"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService consultarPublico retorna 404 quando processo não encontrado pelo número","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"retorna 404 quando processo não encontrado pelo número"},{"ancestorTitles":["processosService","consultarPublico"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService consultarPublico retorna 403 quando restrito sem chave","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando restrito sem chave"},{"ancestorTitles":["processosService","consultarPublico"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService consultarPublico retorna 403 quando CPF/chave inválidos","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"retorna 403 quando CPF/chave inválidos"},{"ancestorTitles":["processosService","consultarPublico"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService consultarPublico retorna dados públicos quando restrito com chave válida","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"retorna dados públicos quando restrito com chave válida"},{"ancestorTitles":["processosService","consultarPublico"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService consultarPublico retorna dados públicos quando processo é público (por número)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna dados públicos quando processo é público (por número)"},{"ancestorTitles":["processosService","consultarPublico"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService consultarPublico busca por UUID quando valor é UUID","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"busca por UUID quando valor é UUID"},{"ancestorTitles":["processosService","listTramites"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService listTramites retorna lista de trâmites para um processo","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"retorna lista de trâmites para um processo"},{"ancestorTitles":["processosService","listTramites"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService listTramites retorna lista vazia quando não há trâmites","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna lista vazia quando não há trâmites"},{"ancestorTitles":["processosService","priorizar"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService priorizar valida prioridade e executor obrigatórios","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"valida prioridade e executor obrigatórios"},{"ancestorTitles":["processosService","priorizar"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService priorizar retorna 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando processo não existe"},{"ancestorTitles":["processosService","priorizar"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService priorizar retorna 403 quando processo está atribuído a outro usuário","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando processo está atribuído a outro usuário"},{"ancestorTitles":["processosService","priorizar"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService priorizar prioriza com sucesso e retorna processo e detalhes","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"prioriza com sucesso e retorna processo e detalhes"},{"ancestorTitles":["processosService","aceitarPendencia"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService aceitarPendencia valida usuário obrigatório","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"valida usuário obrigatório"},{"ancestorTitles":["processosService","aceitarPendencia"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService aceitarPendencia retorna 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando processo não existe"},{"ancestorTitles":["processosService","aceitarPendencia"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService aceitarPendencia retorna 400 quando processo não está pendente","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 400 quando processo não está pendente"},{"ancestorTitles":["processosService","aceitarPendencia"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService aceitarPendencia retorna 400 quando usuário não encontrado","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 400 quando usuário não encontrado"},{"ancestorTitles":["processosService","aceitarPendencia"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService aceitarPendencia retorna 403 quando usuário não pertence ao setor destino","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando usuário não pertence ao setor destino"},{"ancestorTitles":["processosService","aceitarPendencia"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"processosService aceitarPendencia aceita pendência com sucesso e retorna processo e detalhes","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"aceita pendência com sucesso e retorna processo e detalhes"},{"ancestorTitles":["processosService","recusarPendencia"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"processosService recusarPendencia valida usuário e motivo obrigatórios","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"valida usuário e motivo obrigatórios"},{"ancestorTitles":["processosService","recusarPendencia"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService recusarPendencia retorna 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando processo não existe"},{"ancestorTitles":["processosService","recusarPendencia"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService recusarPendencia retorna 400 quando processo não está pendente","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 400 quando processo não está pendente"},{"ancestorTitles":["processosService","recusarPendencia"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService recusarPendencia retorna 400 quando usuário não encontrado","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 400 quando usuário não encontrado"},{"ancestorTitles":["processosService","recusarPendencia"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"processosService recusarPendencia retorna 403 quando usuário não pertence ao setor destino","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando usuário não pertence ao setor destino"},{"ancestorTitles":["processosService","recusarPendencia"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"processosService recusarPendencia recusa pendência com sucesso e retorna processo e detalhes","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"recusa pendência com sucesso e retorna processo e detalhes"}],"endTime":1761678248992,"message":"","name":"C:\\Users\\lcmuniz\\Documents\\spe-projects\\spe-api\\services\\__tests__\\processosService.test.js","startTime":1761678241838,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["transacoesService"],"duration":53,"failureDetails":[],"failureMessages":[],"fullName":"transacoesService beginTransaction chama BEGIN uma vez","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"beginTransaction chama BEGIN uma vez"},{"ancestorTitles":["transacoesService"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"transacoesService commitTransaction chama COMMIT uma vez","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"commitTransaction chama COMMIT uma vez"},{"ancestorTitles":["transacoesService"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"transacoesService rollback chama ROLLBACK e resolve no sucesso","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"rollback chama ROLLBACK e resolve no sucesso"},{"ancestorTitles":["transacoesService"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"transacoesService rollback engole o erro quando ROLLBACK falha","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"rollback engole o erro quando ROLLBACK falha"}],"endTime":1761678248995,"message":"","name":"C:\\Users\\lcmuniz\\Documents\\spe-projects\\spe-api\\services\\__tests__\\transacoesService.test.js","startTime":1761678242139,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["emailService"],"duration":136,"failureDetails":[],"failureMessages":[],"fullName":"emailService valida destinatários obrigatórios (400)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"valida destinatários obrigatórios (400)"},{"ancestorTitles":["emailService"],"duration":27,"failureDetails":[],"failureMessages":[],"fullName":"emailService valida subject obrigatório (400)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"valida subject obrigatório (400)"},{"ancestorTitles":["emailService"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"emailService valida html ou text obrigatório (400)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"valida html ou text obrigatório (400)"},{"ancestorTitles":["emailService"],"duration":210,"failureDetails":[],"failureMessages":[],"fullName":"emailService falha 500 quando API_KEY ausente","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"falha 500 quando API_KEY ausente"},{"ancestorTitles":["emailService"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"emailService envia com sucesso e retorna ok: true","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"envia com sucesso e retorna ok: true"},{"ancestorTitles":["emailService"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"emailService sendToUsuarios constrói emails com INTERNAL_EMAIL_DOMAIN","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"sendToUsuarios constrói emails com INTERNAL_EMAIL_DOMAIN"},{"ancestorTitles":["emailService"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"emailService sendToUsuarios lança 400 quando INTERNAL_EMAIL_DOMAIN ausente","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"sendToUsuarios lança 400 quando INTERNAL_EMAIL_DOMAIN ausente"}],"endTime":1761678249204,"message":"","name":"C:\\Users\\lcmuniz\\Documents\\spe-projects\\spe-api\\services\\__tests__\\emailService.test.js","startTime":1761678241845,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["documentosService","listByProcesso"],"duration":22,"failureDetails":[],"failureMessages":[],"fullName":"documentosService listByProcesso erro 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"erro 404 quando processo não existe"},{"ancestorTitles":["documentosService","listByProcesso"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService listByProcesso lista documentos assinados quando viewerSetor ausente","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"lista documentos assinados quando viewerSetor ausente"},{"ancestorTitles":["documentosService","listByProcesso"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService listByProcesso lista documentos considerando setor do viewer quando informado","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"lista documentos considerando setor do viewer quando informado"},{"ancestorTitles":["documentosService","linkDocumento"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService linkDocumento valida documentoId obrigatório e lança erro 400","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"valida documentoId obrigatório e lança erro 400"},{"ancestorTitles":["documentosService","linkDocumento"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService linkDocumento lança 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando processo não existe"},{"ancestorTitles":["documentosService","linkDocumento"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService linkDocumento lança 404 quando documento não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando documento não existe"},{"ancestorTitles":["documentosService","linkDocumento"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService linkDocumento insere link e retorna ok: true","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"insere link e retorna ok: true"},{"ancestorTitles":["documentosService","createDocumento"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"documentosService createDocumento valida título obrigatório e lança erro 400","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"valida título obrigatório e lança erro 400"},{"ancestorTitles":["documentosService","createDocumento"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService createDocumento cria documento rascunho e retorna dados do SELECT","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"cria documento rascunho e retorna dados do SELECT"},{"ancestorTitles":["documentosService","getDocumentoById"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService getDocumentoById retorna null quando não encontra","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna null quando não encontra"},{"ancestorTitles":["documentosService","getDocumentoById"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"documentosService getDocumentoById retorna objeto com campos mapeados quando encontra","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"retorna objeto com campos mapeados quando encontra"},{"ancestorTitles":["documentosService","assinar"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"documentosService assinar valida usuário executor obrigatório","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"valida usuário executor obrigatório"},{"ancestorTitles":["documentosService","assinar"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService assinar lança 404 quando documento não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando documento não existe"},{"ancestorTitles":["documentosService","assinar"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"documentosService assinar lança 400 quando modo não é Editor nem Upload","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 400 quando modo não é Editor nem Upload"},{"ancestorTitles":["documentosService","assinar"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService assinar assina documento de Upload válido e retorna documento","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"assina documento de Upload válido e retorna documento"},{"ancestorTitles":["documentosService","deletarRascunho"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService deletarRascunho impede excluir documento assinado (erro 400)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"impede excluir documento assinado (erro 400)"},{"ancestorTitles":["documentosService","deletarRascunho"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService deletarRascunho exclui rascunho criado pelo usuário e retorna ok","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"exclui rascunho criado pelo usuário e retorna ok"},{"ancestorTitles":["gerarPdfPublico"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico retorna 404 quando documento não existe","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"retorna 404 quando documento não existe"},{"ancestorTitles":["gerarPdfPublico"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico retorna 403 quando documento não assinado","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando documento não assinado"},{"ancestorTitles":["gerarPdfPublico"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico processo não público sem CPF+chave retorna 403","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"processo não público sem CPF+chave retorna 403"},{"ancestorTitles":["gerarPdfPublico"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico CPF/chave inválidos retornam 403","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"CPF/chave inválidos retornam 403"},{"ancestorTitles":["gerarPdfPublico"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico upload PDF retorna conteúdo base64 e fileName do arquivo","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"upload PDF retorna conteúdo base64 e fileName do arquivo"},{"ancestorTitles":["gerarPdfPublico"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico editor gera PDF via puppeteer e retorna base64","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"editor gera PDF via puppeteer e retorna base64"},{"ancestorTitles":["gerarPdfPublico adicionais"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico adicionais gera PDF no modo Editor com texto simples (sanitiza &<> e título)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"gera PDF no modo Editor com texto simples (sanitiza &<> e título)"},{"ancestorTitles":["gerarPdfPublico adicionais"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico adicionais gera PDF no modo Upload (imagem PNG)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"gera PDF no modo Upload (imagem PNG)"},{"ancestorTitles":["gerarPdfPublico adicionais"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico adicionais converte imagem WEBP para PDF no modo upload","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"converte imagem WEBP para PDF no modo upload"},{"ancestorTitles":["gerarPdfPublico adicionais"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico adicionais converte SVG para PDF no modo upload","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"converte SVG para PDF no modo upload"},{"ancestorTitles":["gerarPdfPublico adicionais"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico adicionais decodifica CSV de bytes quando upload PDF com base64 em CSV","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"decodifica CSV de bytes quando upload PDF com base64 em CSV"},{"ancestorTitles":["gerarPdfPublico adicionais"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico adicionais retorna 415 para modo não suportado","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"retorna 415 para modo não suportado"},{"ancestorTitles":["gerarPdfPublico adicionais"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico adicionais gera PDF quando conteúdo já é HTML (usa diretamente)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"gera PDF quando conteúdo já é HTML (usa diretamente)"},{"ancestorTitles":["gerarPdfPublico adicionais"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico adicionais gera PDF com template padrão quando conteúdo vazio (Editor)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"gera PDF com template padrão quando conteúdo vazio (Editor)"},{"ancestorTitles":["gerarPdfPublico adicionais"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico adicionais retorna 409 quando upload sem conteúdo base64","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"retorna 409 quando upload sem conteúdo base64"},{"ancestorTitles":["uploadConteudo adicionais"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"uploadConteudo adicionais exige usuarioLogin para documento assinado","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"exige usuarioLogin para documento assinado"},{"ancestorTitles":["uploadConteudo adicionais"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"uploadConteudo adicionais usa defaults e atualiza assinado → rascunho quando fim da árvore","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"usa defaults e atualiza assinado → rascunho quando fim da árvore"},{"ancestorTitles":["uploadConteudo adicionais"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"uploadConteudo adicionais retorna 404 quando UPDATE não afeta linhas","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando UPDATE não afeta linhas"},{"ancestorTitles":["uploadConteudo adicionais"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"uploadConteudo adicionais lança 400 quando documento não está vinculado a processo (rascunho)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 400 quando documento não está vinculado a processo (rascunho)"},{"ancestorTitles":["editorConteudo adicionais"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"editorConteudo adicionais exige usuarioLogin para rascunho","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"exige usuarioLogin para rascunho"},{"ancestorTitles":["editorConteudo adicionais"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"editorConteudo adicionais retorna 404 quando UPDATE não afeta linhas","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando UPDATE não afeta linhas"},{"ancestorTitles":["assinar adicionais"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"assinar adicionais retorna 400 para Upload sem conteúdo","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 400 para Upload sem conteúdo"},{"ancestorTitles":["assinar adicionais"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"assinar adicionais retorna 400 para Upload com extensão inválida","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 400 para Upload com extensão inválida"},{"ancestorTitles":["assinar adicionais"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"assinar adicionais assina com sucesso em modo Editor no fim da árvore","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"assina com sucesso em modo Editor no fim da árvore"},{"ancestorTitles":["assinar adicionais"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"assinar adicionais retorna 404 quando UPDATE não afeta linhas (Editor)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 404 quando UPDATE não afeta linhas (Editor)"},{"ancestorTitles":["gerarPdfPublico adicionais (upload extensão não suportada)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"gerarPdfPublico adicionais (upload extensão não suportada) lança 415 no modo upload com extensão não suportada","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"lança 415 no modo upload com extensão não suportada"},{"ancestorTitles":["editorConteudo adicionais (regras de autorização)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"editorConteudo adicionais (regras de autorização) impede editar assinado por outro usuário","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"impede editar assinado por outro usuário"},{"ancestorTitles":["editorConteudo adicionais (regras de autorização)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"editorConteudo adicionais (regras de autorização) retorna 403 quando documento não está no fim da árvore (editor assinado)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando documento não está no fim da árvore (editor assinado)"},{"ancestorTitles":["uploadConteudo extra consolidação"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"uploadConteudo extra consolidação lança 404 quando documento não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando documento não existe"},{"ancestorTitles":["uploadConteudo extra consolidação"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"uploadConteudo extra consolidação exige usuarioLogin para rascunho","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"exige usuarioLogin para rascunho"},{"ancestorTitles":["uploadConteudo extra consolidação"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"uploadConteudo extra consolidação atualiza conteúdo de rascunho no fim da árvore","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"atualiza conteúdo de rascunho no fim da árvore"},{"ancestorTitles":["deletarRascunho não vinculado"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"deletarRascunho não vinculado erro 400 quando documento não vinculado a processo","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"erro 400 quando documento não vinculado a processo"},{"ancestorTitles":["editorConteudo extra consolidação"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"editorConteudo extra consolidação lança 404 quando documento não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando documento não existe"},{"ancestorTitles":["editorConteudo extra consolidação"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"editorConteudo extra consolidação edita rascunho quando no fim da árvore","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"edita rascunho quando no fim da árvore"},{"ancestorTitles":["editorConteudo extra consolidação"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"editorConteudo extra consolidação edita assinado quando usuário é o assinante e no fim da árvore","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"edita assinado quando usuário é o assinante e no fim da árvore"},{"ancestorTitles":["editorConteudo extra consolidação"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"editorConteudo extra consolidação retorna 400 quando processo não está atribuído ao editar assinado","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 400 quando processo não está atribuído ao editar assinado"},{"ancestorTitles":["editorConteudo extra consolidação"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"editorConteudo extra consolidação retorna 403 quando processo está atribuído a outro usuário ao editar assinado","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna 403 quando processo está atribuído a outro usuário ao editar assinado"},{"ancestorTitles":["editorConteudo casos de borda (fim da árvore)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"editorConteudo casos de borda (fim da árvore) permite editar rascunho quando há assinatura anterior de outro setor e doc está em endStart","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"permite editar rascunho quando há assinatura anterior de outro setor e doc está em endStart"},{"ancestorTitles":["editorConteudo casos de borda (fim da árvore)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"editorConteudo casos de borda (fim da árvore) permite edição quando assinatura anterior é do mesmo setor (não conta como cross)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"permite edição quando assinatura anterior é do mesmo setor (não conta como cross)"},{"ancestorTitles":["documentosService - seedByProcesso"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService - seedByProcesso lança 404 quando processo não existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lança 404 quando processo não existe"},{"ancestorTitles":["documentosService - seedByProcesso"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"documentosService - seedByProcesso retorna seeded:false quando já há documentos vinculados","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retorna seeded:false quando já há documentos vinculados"},{"ancestorTitles":["documentosService - seedByProcesso"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"documentosService - seedByProcesso semeia documento com autor do setor quando não há atribuído e autorLogin ausente","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"semeia documento com autor do setor quando não há atribuído e autorLogin ausente"},{"ancestorTitles":["documentosService - seedByProcesso"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"documentosService - seedByProcesso usa autorLogin fornecido sem consultar usuários de setor","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"usa autorLogin fornecido sem consultar usuários de setor"},{"ancestorTitles":["documentosService - seedByProcesso"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"documentosService - seedByProcesso usa atribuido_usuario como autor quando presente e autorLogin não fornecido","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"usa atribuido_usuario como autor quando presente e autorLogin não fornecido"}],"endTime":1761678249623,"message":"","name":"C:\\Users\\lcmuniz\\Documents\\spe-projects\\spe-api\\services\\__tests__\\documentosService.test.js","startTime":1761678241832,"status":"passed","summary":""}],"wasInterrupted":false}
